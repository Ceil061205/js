<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    console.log('start');

    function bar() {
      console.log('bar');
    }

    // 会加入宏任务事件队列中
    setTimeout(function () {
      console.log('timeout');
    }, 0);

    // promise中的then回调会加入微任务队列中
    console.log('1');
    new Promise((resolve, reject) => {
      console.log('2');
      console.log('---1');
      
      resolve();
      console.log('---2');
      
    }).then(() => {
      console.log('promise');
    });
    console.log('3');
    

    bar();

    console.log('end');

    // 宏任务队列: setTimeout ajax setInterval dom监听 uirendering
    // 微任务队列: promise.then mutationObserver process.nextTick queueMicrotask(()=>{})

    // 执行顺序: mainscript 微任务队列  宏任务队列
    // 宏任务队列执行完毕后，会再次检查微任务队列
    // 微任务队列执行完毕后，才会继续执行下一个宏任务

  </script>
</body>
</html>